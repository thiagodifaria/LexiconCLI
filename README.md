# LexiconCLI - Sistema de An√°lise Financeira

LexiconCLI √© um sistema de an√°lise financeira interativo e de √∫ltima gera√ß√£o, meticulosamente desenvolvido em Python para operar diretamente no ambiente de terminal. Este projeto foi concebido para capacitar traders, investidores, analistas quantitativos e entusiastas do mercado financeiro com ferramentas avan√ßadas para monitoramento de mercados, previs√µes probabil√≠sticas e quantifica√ß√£o de incerteza. A arquitetura do LexiconCLI implementa t√©cnicas state-of-the-art em Deep Learning Financeiro, incluindo modelos como Bayesian LSTM, Prophet, al√©m de t√©cnicas como Monte Carlo Dropout e sistemas adaptativos de otimiza√ß√£o. A estrutura segue rigorosamente o padr√£o Model-View-Controller (MVC), garantindo modularidade, escalabilidade, manutenibilidade empresarial e uma clara separa√ß√£o de responsabilidades. O sistema se destaca pela sua capacidade de integrar e processar dados de uma vasta gama de APIs financeiras, pela robustez de seu mecanismo de cache para otimiza√ß√£o de performance, pela sofistica√ß√£o de sua interface de usu√°rio constru√≠da com a biblioteca Rich e pela inclus√£o de um sistema de alertas configur√°vel que opera em background para notifica√ß√µes proativas.

## üöÄ Execut√°vel Dispon√≠vel

üì¶ **Download Direto**: Execut√°vel pr√©-compilado dispon√≠vel na se√ß√£o [Releases](https://github.com/thiagodifaria/LexiconCLI/releases) - Sem necessidade de instala√ß√£o do Python!

## üéØ Funcionalidades

- ‚úÖ **Monitoramento de mercado**: Dashboard interativo com a√ß√µes e √≠ndices globais
- ‚úÖ **Watchlist personalizada**: Acompanhamento de ativos favoritos do usu√°rio
- ‚úÖ **Indicadores macroecon√¥micos**: Visualiza√ß√£o de dados econ√¥micos chave (BCB, FRED, Nasdaq)
- ‚úÖ **An√°lise t√©cnica completa**: Ampla gama de indicadores t√©cnicos avan√ßados
  - **Tend√™ncia**: SMA/EMA (9, 21, 50, 200 dias), MACD, Bandas de Bollinger, ADX
  - **Momentum**: RSI, Oscilador Estoc√°stico, ROC, Williams %R
  - **Volume**: OBV (On-Balance Volume), Volume SMA
  - **Volatilidade**: ATR, Desvio Padr√£o dos Retornos, Volatilidade Rolling
- ‚úÖ **Modelos de previs√£o avan√ßados**: LSTM Bayesian e Prophet com quantifica√ß√£o de incerteza
- ‚úÖ **Simula√ß√£o Monte Carlo**: An√°lise probabil√≠stica de cen√°rios futuros com GBM
- ‚úÖ **An√°lise fundamentalista**: Balan√ßos patrimoniais, DRE e fluxos de caixa via Finnhub
- ‚úÖ **Backtesting inteligente**: Teste de estrat√©gias com otimiza√ß√£o autom√°tica de par√¢metros
- ‚úÖ **Sistema de alertas em tempo real**: Notifica√ß√µes baseadas em pre√ßos, RSI, MACD e condi√ß√µes personalizadas
- ‚úÖ **Data augmentation**: T√©cnicas avan√ßadas (jittering, time/magnitude warping) para datasets pequenos
- ‚úÖ **Feature selection adaptativo**: Sele√ß√£o autom√°tica de features baseada no dataset
- ‚úÖ **Ensemble learning**: Combina√ß√£o de m√∫ltiplos modelos para maior precis√£o
- ‚úÖ **M√∫ltiplas fontes de dados**: Integra√ß√£o com 7+ APIs financeiras diversas
- ‚úÖ **Sistema de cache inteligente**: Otimiza√ß√£o de performance com SQLite
- ‚úÖ **Exporta√ß√£o de dados**: CSV, TXT e outros formatos
- ‚úÖ **Interface rica no terminal**: Menus naveg√°veis e gr√°ficos interativos com Rich

## üîß Tecnologias

### Core Technologies
- **Python 3.9+**: Linguagem de programa√ß√£o principal
- **Rich**: Interface de usu√°rio avan√ßada para terminal com suporte a cores e layouts
- **Plotext**: Visualiza√ß√£o de gr√°ficos ASCII no terminal
- **SQLite**: Armazenamento local, cache e persist√™ncia de dados
- **Pandas & NumPy**: Manipula√ß√£o e an√°lise de dados de alta performance

### Machine Learning & AI
- **TensorFlow/Keras**: Framework principal para deep learning
- **Scikit-learn**: Pr√©-processamento, m√©tricas e valida√ß√£o de modelos
- **Prophet (Meta)**: An√°lise de tend√™ncias, sazonalidades e decomposi√ß√£o temporal
- **SciPy**: Algoritmos cient√≠ficos e otimiza√ß√£o num√©rica
- **TA-Lib**: Biblioteca especializada em an√°lise t√©cnica

### An√°lise Quantitativa Avan√ßada
- **Monte Carlo Dropout**: Quantifica√ß√£o de incerteza bayesiana
- **Focal Loss**: Fun√ß√£o de perda especializada para classes desbalanceadas
- **Bayesian Neural Networks**: Redes neurais com quantifica√ß√£o de incerteza
- **Adaptive Feature Selection**: Sele√ß√£o inteligente de features
- **Time Series Augmentation**: Aumento de dados para s√©ries temporais
- **Backtesting Library**: Framework de backtesting profissional

### APIs Integradas

- **Finnhub**: Cota√ß√µes em tempo real, busca de s√≠mbolos e dados fundamentalistas
- **yfinance**: Dados hist√≥ricos de mercado e informa√ß√µes corporativas
- **python-bcb**: Indicadores macroecon√¥micos brasileiros (IPCA, SELIC, PTAX)
- **Investpy**: Dados hist√≥ricos com mapeamento para mercados globais
- **FRED (Federal Reserve)**: S√©ries econ√¥micas americanas e indicadores macro
- **Nasdaq Data Link**: Datasets variados, commodities e dados alternativos
- **Alpha Vantage**: Dados hist√≥ricos complementares e an√°lise de sentimento

## üìà Modelos de Machine Learning

### LSTM Bayesian Avan√ßado
- **Arquitetura**: Bidirectional LSTM com Monte Carlo Dropout
- **Quantifica√ß√£o de Incerteza**: Epistemic e aleatoric uncertainty
- **Features**: Indicadores t√©cnicos + features temporais + sentiment score
- **Otimiza√ß√£o**: Focal Loss para classes desbalanceadas
- **Valida√ß√£o**: Cross-symbol validation e threshold optimization
- **M√©tricas**: Accuracy, F1-weighted, Balanced Accuracy, Cohen's Kappa

### Prophet (Meta) Multivariado
- **Capacidades**: An√°lise de tend√™ncias, sazonalidades e feriados
- **Regressores**: Indicadores t√©cnicos como vari√°veis externas
- **Intervalos de Confian√ßa**: Previs√µes com bandas de incerteza
- **Detec√ß√£o**: Changepoints autom√°ticos e anomalias
- **Valida√ß√£o**: Backtesting temporal com m√©tricas robustas

### Monte Carlo Simulator
- **Modelo**: Geometric Brownian Motion (GBM) 
- **Par√¢metros**: Drift e volatilidade calculados dinamicamente
- **Simula√ß√µes**: At√© 10.000 trajet√≥rias paralelas
- **Estat√≠sticas**: Percentis, VaR, m√©tricas de risco
- **Visualiza√ß√£o**: Gr√°ficos ASCII interativos

### Ensemble & Hybrid Methods
- **Ensemble LSTM + Monte Carlo**: Voting ponderado entre modelos
- **Uncertainty Aggregation**: Combina√ß√£o de incertezas epist√™micas
- **Adaptive Weighting**: Pesos din√¢micos baseados em performance
- **Calibration**: Calibra√ß√£o de incerteza para melhor confiabilidade

### Avalia√ß√£o de Modelos
```
M√©tricas LSTM Bayesian - AAPL:
‚îú‚îÄ Accuracy: 93.8%
‚îú‚îÄ F1-Score (Weighted): 0.645
‚îú‚îÄ Balanced Accuracy: 38.0%
‚îú‚îÄ Mean Confidence: 0.742
‚îú‚îÄ Epistemic Uncertainty: 0.156
‚îî‚îÄ Threshold Optimization: Enabled
```

## üéØ Recursos Avan√ßados

### Sistema de Cache Inteligente
- **Backend**: SQLite com compress√£o autom√°tica
- **Estrat√©gias**: TTL diferenciado por fonte de dados
- **Otimiza√ß√£o**: Cache-aside pattern com fallback graceful
- **Persist√™ncia**: Modelos treinados e configura√ß√µes de usu√°rio

### Sistema de Alertas Proativo
- **Monitoramento**: Thread dedicada para verifica√ß√£o cont√≠nua
- **Tipos de Alerta**: 
  - Pre√ßos (acima/abaixo de threshold)
  - Indicadores t√©cnicos (RSI sobrecompra/sobrevenda)
  - Cruzamentos de m√©dias m√≥veis e sinais MACD
  - Condi√ß√µes customizadas program√°veis
- **Notifica√ß√µes**: Sistema operacional + console em tempo real
- **Configura√ß√£o**: Interface interativa para cria√ß√£o/edi√ß√£o

### Data Augmentation Avan√ßado
- **T√©cnicas Implementadas**:
  - **Jittering**: Adi√ß√£o de ru√≠do gaussiano calibrado
  - **Time Warping**: Distor√ß√£o temporal com cubic splines
  - **Magnitude Warping**: Scaling n√£o-linear de amplitudes
- **Seguran√ßa**: Timeout protection e valida√ß√£o de qualidade
- **Adaptativo**: Multiplicadores baseados no tamanho do dataset

### Feature Selection Inteligente
- **M√©todos**: Correlation filtering, variance thresholding, mutual information
- **Adaptativo**: Configura√ß√£o autom√°tica baseada no tamanho do dataset
- **Valida√ß√£o**: Cross-validation para sele√ß√£o robusta
- **An√°lise**: Matriz de correla√ß√£o e grupos de redund√¢ncia

### Arquitetura Adaptativa
- **Dynamic LSTM**: Arquitetura ajustada automaticamente ao dataset
- **Complexity Management**: Controle da rela√ß√£o samples/parameters
- **Regularization**: Dropout e L2 adaptativos
- **Early Stopping**: Parada inteligente com m√∫ltiplas m√©tricas

### Tratamento de Classes Desbalanceadas
- **Focal Loss**: Implementa√ß√£o customizada com par√¢metros adaptativos
- **Class Weighting**: Estrat√©gias balanced, balanced_smooth e inverse
- **Threshold Optimization**: Busca grid para otimiza√ß√£o de F1-score
- **Oversampling**: T√©cnicas de data augmentation espec√≠ficas

### Exporta√ß√£o e Relat√≥rios
- **Formatos**: CSV estruturado, TXT formatado, JSON configura√ß√µes
- **Conte√∫do**: Dados hist√≥ricos, indicadores calculados, resultados de backtesting
- **Automa√ß√£o**: Relat√≥rios schedulados e exporta√ß√£o em batch
- **Compress√£o**: Otimiza√ß√£o autom√°tica para arquivos grandes

## üìã Pr√©-requisitos

- Python 3.9 ou superior
- Pip (gerenciador de pacotes)

## üöÄ Instala√ß√£o

```bash
# Clonar o reposit√≥rio
git clone https://github.com/thiagodifaria/LexiconCLI.git
cd LexiconCLI

# Criar ambiente virtual (recomendado)
python -m venv venv

# Ativar ambiente virtual
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows

# Instalar depend√™ncias
pip install -r requirements.txt
```

## ‚öôÔ∏è Configura√ß√£o

1. Crie um arquivo `.env` na raiz do projeto:
   ```bash
   touch .env  # Linux/Mac
   ```

2. Adicione suas chaves de API no arquivo `.env`:
   ```env
   # Chaves de API necess√°rias
   FINNHUB_API_KEY=sua_chave_finnhub_aqui
   ALPHA_VANTAGE_API_KEY=sua_chave_alphavantage_aqui
   FRED_API_KEY=sua_chave_fred_aqui
   NASDAQ_API_KEY=sua_chave_nasdaq_aqui
   
   # Configura√ß√µes opcionais
   DEFAULT_PERIOD=1y
   CACHE_EXPIRATION=3600
   ```

**Nota**: As APIs yfinance, python-bcb e investpy n√£o requerem chaves para uso b√°sico.

## üñ•Ô∏è Executando a Aplica√ß√£o

```bash
# Com ambiente virtual ativado
python main.py
```

**Windows**: O sistema tentar√° abrir em uma nova janela de console para melhor experi√™ncia visual.

## üìä Como Usar

### Menu Principal
Ap√≥s iniciar a aplica√ß√£o, voc√™ ver√° um dashboard com vis√£o geral do mercado. Navegue pelos menus usando as op√ß√µes num√©ricas:

1. **An√°lise de Ativo**: Insira um s√≠mbolo para visualizar gr√°ficos e indicadores t√©cnicos
2. **Indicadores Macro**: Dados detalhados do BCB, FRED e Nasdaq Data Link
3. **Previs√µes**: Execute modelos LSTM Bayesian ou Prophet com m√©tricas e gr√°ficos comparativos
4. **Watchlist & Configura√ß√µes**: Gerencie favoritos, alertas e prefer√™ncias

### Configura√ß√£o de Alertas
```
Tipo de Alerta:
1. Pre√ßo acima de valor
2. RSI em sobrecompra (>70)
3. MACD cruzamento altista
4. Condi√ß√µes personalizadas
```

## üß™ Testes

```bash
# Executar todos os testes
pytest

# Executar com relat√≥rio de cobertura
pytest --cov=controllers --cov=models --cov=views --cov=utils tests/

# Testes espec√≠ficos
pytest tests/test_models.py::test_lstm_prediction
```

## üì∑ Screenshots

### Menu Principal
![Menu Principal](./images/menu_principal.png)

### Dashboard Principal
![Dashboard Principal](./images/dashboard_principal.png)

### An√°lise de Ativo - (AMZN)
![An√°lise AMZN](./images/analise_amzn.png)

### Previs√£o LSTM - (AMZN)
![Previs√£o LSTM](./images/previsao_lstm_amzn.png)

## üîÑ Fluxo de Desenvolvimento

1. Clone o reposit√≥rio
2. Crie uma branch para sua feature (`git checkout -b feature/nome-da-feature`)
3. Implemente suas altera√ß√µes seguindo o padr√£o MVC
4. Adicione testes correspondentes
5. Execute todos os testes (`pytest`)
6. Formate o c√≥digo (seguindo PEP 8)
7. Fa√ßa commit das altera√ß√µes (`git commit -m 'feat: adiciona nova funcionalidade'`)
8. Envie para a branch (`git push origin feature/nome-da-feature`)
9. Abra um Pull Request

## üö¢ Deploy

### Execut√°vel Standalone
```bash
# Criar execut√°vel com PyInstaller
pip install pyinstaller
pyinstaller --onefile --name LexiconCLI main.py
```

### Docker (Futuro)
```bash
# Construir imagem
docker build -t lexicon-cli .

# Executar container
docker run -it --rm lexicon-cli
```

## üìú Licen√ßa

Este projeto est√° licenciado sob a licen√ßa MIT - veja o arquivo [LICENSE](LICENSE) para detalhes.

## üìû Contato

Thiago Di Faria - [thiagodifaria@gmail.com](mailto:thiagodifaria@gmail.com)

Link do projeto: [https://github.com/thiagodifaria/LexiconCLI](https://github.com/thiagodifaria/LexiconCLI)